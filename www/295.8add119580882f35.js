"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[295],{295:(k,f,r)=>{r.r(f),r.d(f,{ChatsPageModule:()=>u});var m=r(6362),d=r(1915),i=r(5708),p=r(993),t=r(3184),C=r(9024),Z=r(7556),v=r(8787);function x(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"New Chat"),t.qZA(),t.TgZ(4,"ion-buttons",3)(5,"ion-button",4),t.NdJ("click",function(){t.CHM(e),t.oxw();const a=t.MAs(2);return t.KtG(a.dismiss())}),t._UZ(6,"ion-icon",5),t.qZA()()(),t._UZ(7,"ion-searchbar",6),t.qZA(),t.TgZ(8,"ion-content")(9,"ion-list")(10,"ion-item")(11,"ion-button",7),t._UZ(12,"ion-icon",8),t.qZA(),t.TgZ(13,"ion-label"),t._uU(14," New Group "),t.qZA()(),t.TgZ(15,"ion-item")(16,"ion-button",7),t._UZ(17,"ion-icon",8),t.qZA(),t.TgZ(18,"ion-label"),t._uU(19," New Contact "),t.qZA()(),t.TgZ(20,"h3",9),t._uU(21,"Frequently Contacted"),t.qZA(),t.TgZ(22,"ion-item")(23,"ion-avatar",7),t._UZ(24,"ion-img",10),t.qZA(),t.TgZ(25,"ion-label")(26,"h2"),t._uU(27,"Greg Smith"),t.qZA(),t.TgZ(28,"p"),t._uU(29,"Director of Operations"),t.qZA()()(),t.TgZ(30,"h3",9),t._uU(31,"All Contacts"),t.qZA(),t.TgZ(32,"ion-item")(33,"ion-avatar",7),t._UZ(34,"ion-img",11),t.qZA(),t.TgZ(35,"ion-label")(36,"h2"),t._uU(37,"Zoey Smith"),t.qZA(),t.TgZ(38,"p"),t._uU(39,"CEO"),t.qZA()()()()()}2&o&&(t.xp6(7),t.Q6J("showClearButton","never")("debounce",100))}class _{constructor(){this.presentingElement=null,this.isAddContactVisible=!1}ngOnInit(){this.presentingElement=document.querySelector(".ion-page")}ShowAddContact(){this.isAddContactVisible=!0}}function T(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-searchbar",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.searchValue=a)})("ionCancel",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())})("click",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearch(a.target.value))})("ionChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.handleChange(a))}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.searchValue)("showClearButton","never")("showCancelButton",e.showCancelButton)("debounce",100)}}function b(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"ion-header",8)(1,"ion-toolbar")(2,"ion-title",9),t._uU(3,"Chats"),t.qZA()(),t.TgZ(4,"ion-toolbar")(5,"ion-searchbar",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.searchValue=a)})("ionCancel",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onCancel())})("click",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearch(a.target.value))})("ionChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.handleChange(a))}),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.searchValue)("showClearButton","never")("showCancelButton",e.showCancelButton)("debounce",100)}}function S(o,n){if(1&o&&(t.TgZ(0,"ion-badge",17),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.unRead)}}_.\u0275fac=function(n){return new(n||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-chat-new"]],decls:4,vars:1,consts:[[1,"ion-padding"],["trigger","open-modal",3,"presentingElement"],["modal",""],["slot","end"],[3,"click"],["name","close-circle-outline"],["placeholder","Search",3,"showClearButton","debounce"],["slot","start"],["name","person-add"],[1,"otherContacts"],["src","https://i.pravatar.cc/300?u=d"],["src","https://i.pravatar.cc/300?u=e"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content",0)(1,"ion-modal",1,2),t.YNc(3,x,40,2,"ng-template"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("presentingElement",e.presentingElement))},dependencies:[i.BJ,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Xz,i.Ie,i.Q$,i.q_,i.VI,i.wd,i.sr,i.ki,i.j9],styles:["ion-modal.stack-modal[_ngcontent-%COMP%]{--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--backdrop-opacity: var(--ion-backdrop-opacity, .32)}.otherContacts[_ngcontent-%COMP%]{margin-left:20px}ion-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--background: none}"]});const M=function(o){return["/chat-detail",o]};function A(o,n){if(1&o&&(t.TgZ(0,"ion-item",11)(1,"ion-avatar",12),t._UZ(2,"ion-img",13),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4),t.TgZ(5,"small",14)(6,"ion-text",15),t._uU(7),t.qZA(),t._UZ(8,"br"),t.YNc(9,S,2,1,"ion-badge",16),t.qZA(),t.TgZ(10,"p")(11,"ion-text",15),t._uU(12),t.qZA()()()()),2&o){const e=n.$implicit;t.Q6J("routerLink",t.VKq(6,M,e.id)),t.xp6(2),t.Q6J("src",e.avatar),t.xp6(2),t.hij(" ",e.name," "),t.xp6(3),t.Oqu(e.lastMessageTime),t.xp6(2),t.Q6J("ngIf",e.unRead>0),t.xp6(3),t.hij(" ",e.lastMessage," ")}}function w(o,n){if(1&o&&(t.TgZ(0,"ion-list"),t.YNc(1,A,13,8,"ion-item",10),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chatsList)}}function P(o,n){1&o&&(t.TgZ(0,"div",21)(1,"ion-item"),t._UZ(2,"ion-icon",22),t.TgZ(3,"ion-label"),t._uU(4,"Photos"),t.qZA()(),t.TgZ(5,"ion-item"),t._UZ(6,"ion-icon",23),t.TgZ(7,"ion-label"),t._uU(8,"GIFs"),t.qZA()(),t.TgZ(9,"ion-item"),t._UZ(10,"ion-icon",24),t.TgZ(11,"ion-label"),t._uU(12,"Links"),t.qZA()(),t.TgZ(13,"ion-item"),t._UZ(14,"ion-icon",25),t.TgZ(15,"ion-label"),t._uU(16,"Videos"),t.qZA()(),t.TgZ(17,"ion-item"),t._UZ(18,"ion-icon",26),t.TgZ(19,"ion-label"),t._uU(20,"Documents"),t.qZA()(),t.TgZ(21,"ion-item"),t._UZ(22,"ion-icon",27),t.TgZ(23,"ion-label"),t._uU(24,"Audio"),t.qZA()()())}function U(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",32),t.NdJ("click",function(){const c=t.CHM(e).$implicit,R=t.oxw(4);return t.KtG(R.onClick(c))}),t.TgZ(2,"ion-avatar",12),t._UZ(3,"ion-img",13),t.qZA(),t.TgZ(4,"ion-label"),t._uU(5),t._UZ(6,"br"),t.TgZ(7,"ion-text",15),t._uU(8),t.qZA(),t.TgZ(9,"small",14),t._UZ(10,"ion-icon",33),t.qZA(),t.TgZ(11,"p")(12,"ion-text",34),t._uU(13),t.qZA()()()(),t.BQk()}if(2&o){const e=n.$implicit;t.xp6(3),t.Q6J("src",e.photoThumbnail),t.xp6(2),t.hij(" ",e.displayName," "),t.xp6(3),t.hij(" ",e.organizationRole," "),t.xp6(5),t.hij(" ",e.organizationName," ")}}function q(o,n){if(1&o&&(t.TgZ(0,"div")(1,"h3",30),t._uU(2,"Other Contacts"),t.qZA(),t.YNc(3,U,14,4,"ng-container",31),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.searchResults)}}function I(o,n){1&o&&(t.TgZ(0,"div",35)(1,"h3"),t._uU(2,"No Records"),t.qZA()())}function O(o,n){if(1&o&&(t.TgZ(0,"div",28),t.YNc(1,q,4,1,"div",4),t.YNc(2,I,3,0,"div",29),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.searchResults.length>0),t.xp6(1),t.Q6J("ngIf",0===e.searchResults.length)}}function N(o,n){if(1&o&&(t.TgZ(0,"ion-list",18),t.YNc(1,P,25,0,"div",19),t.YNc(2,O,3,2,"div",20),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isSearchStarted),t.xp6(1),t.Q6J("ngIf",e.isSearchStarted)}}class g{constructor(n,e,s,a){this.platformService=n,this.authService=e,this.photoService=s,this.router=a,this.chatsList=[],this.isSearchMode=!1,this.showCancelButton="never",this.isSearchStarted=!1,this.searchResults=[]}dataInit(n){return this.chatsList=[],new Promise(e=>{for(let s in n)this.chatsList.push({id:s,name:n[s].displayName,avatar:"default"===n[s].photoThumbnail?"../../../assets/img/avatar.svg":n[s].photoThumbnail,lastMessage:n[s].lastMessage,lastMessageTime:n[s].lastMessageTime,unRead:n[s].unRead});this.authService.showLoader=!1,e("")})}ngOnInit(){this.authService.showLoader=!0,this.dataInit(this.authService.form.conversations).then(()=>{}),this.authService.formData$.subscribe(n=>{this.dataInit(this.authService.form.conversations).then(()=>{})})}onSearch(n){this.isSearchMode=!0,this.showCancelButton="always"}onCancel(){this.isSearchMode=!1,this.isSearchStarted=!1,this.showCancelButton="never",this.searchResults=[]}handleChange(n){const e=n.target.value;if(this.searchResults=[],e){this.isSearchStarted=!0,this.isSearchMode=!0;for(let s in this.authService.contactList.accessibleContacts.viaNumber){let a=this.authService.contactList.accessibleContacts.viaNumber[s];-1!==s.indexOf(e)&&(a.organizationRole=s,a.photoThumbnail="default"===a.photoThumbnail?"../../../assets/img/avatar.svg":a.photoThumbnail,this.searchResults.push(a))}for(let s in this.authService.contactList.accessibleContacts.viaName){let a=this.authService.contactList.accessibleContacts.viaName[s];-1!==s.indexOf(e)&&(a.organizationRole=a.phoneNumbers[0].number.slice(-10).trim(),-1===this.searchResults.indexOf(a)&&(a.photoThumbnail="default"===a.photoThumbnail?"../../../assets/img/avatar.svg":a.photoThumbnail,this.searchResults.push(a)))}}else this.isSearchStarted=!1}onClick(n){var e;if(null!==(e=this.authService.form)&&void 0!==e&&e.conversations)if(this.authService.form.conversations[n.organizationRole])this.authService.form.conversations[n.organizationRole].unRead=0;else{const s=Object.assign(Object.assign({chats:[],lastMessage:"",lastMessageTime:""},n),{unRead:0});this.authService.form.conversations[n.organizationRole]=s}else{this.authService.form.conversations=Object.create({});const s=Object.assign(Object.assign({chats:[],lastMessage:"",lastMessageTime:""},n),{unRead:0});this.authService.form.conversations[n.organizationRole]=s}this.searchValue=null,this.isSearchMode=!1,this.isSearchStarted=!1,this.showCancelButton="never",this.router.navigate(["/chat-detail",n.organizationRole])}}g.\u0275fac=function(n){return new(n||g)(t.Y36(C.m),t.Y36(Z.$),t.Y36(v.T),t.Y36(p.F0))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-chats"]],decls:16,vars:4,consts:[["slot","start"],["slot","end"],["id","open-modal","expand","block"],["slot","icon-only","name","create-outline"],[4,"ngIf"],["collapse","condense",4,"ngIf"],["class","searchItems",4,"ngIf"],["placeholder","Search",3,"ngModel","showClearButton","showCancelButton","debounce","ngModelChange","ionCancel","click","ionChange"],["collapse","condense"],["size","large"],["button","","detail","false","routerdirection","forward",3,"routerLink",4,"ngFor","ngForOf"],["button","","detail","false","routerdirection","forward",3,"routerLink"],["slot","start",2,"width","52px","height","52px"],["alt","Avatar",3,"src"],[1,"ion-float-right"],["color","medium"],["class","unReadCount","color","primary",4,"ngIf"],["color","primary",1,"unReadCount"],[1,"searchItems"],["class","fixedSearchItems",4,"ngIf"],["class","dynamicSearchItems",4,"ngIf"],[1,"fixedSearchItems"],["name","camera-outline"],["name","aperture-outline"],["name","link-outline"],["name","videocam-outline"],["name","document-text-outline"],["name","musical-notes-outline"],[1,"dynamicSearchItems"],["class","noRecords",4,"ngIf"],[1,"otherContacts"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["name","information-circle-outline"],["color","medium",1,"colorPink"],[1,"noRecords"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button"),t._uU(4," Change "),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Chats"),t.qZA(),t.TgZ(7,"ion-buttons",1)(8,"ion-button",2),t._UZ(9,"ion-icon",3),t.qZA()()(),t.YNc(10,T,2,4,"ion-toolbar",4),t.qZA(),t.TgZ(11,"ion-content"),t.YNc(12,b,6,4,"ion-header",5),t.YNc(13,w,2,1,"ion-list",4),t.YNc(14,N,3,2,"ion-list",6),t.qZA(),t._UZ(15,"app-chat-new")),2&n&&(t.xp6(10),t.Q6J("ngIf",e.platformService.isAndroid),t.xp6(2),t.Q6J("ngIf",e.platformService.isIOS),t.xp6(1),t.Q6J("ngIf",!e.isSearchMode),t.xp6(1),t.Q6J("ngIf",e.isSearchMode))},dependencies:[m.sg,m.O5,d.JJ,d.On,i.BJ,i.yp,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Xz,i.Ie,i.Q$,i.q_,i.VI,i.yW,i.wd,i.sr,i.j9,i.YI,p.rH,_],styles:[".fixedSearchItems[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#008080cc;margin-right:20px;width:22px;height:22px}.dynamicSearchItems[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#008080cc;width:22px;height:22px}.dynamicSearchItems[_ngcontent-%COMP%]   .colorPink[_ngcontent-%COMP%]{color:#008080cc}.searchItems[_ngcontent-%COMP%]{transition:20ms}.otherContacts[_ngcontent-%COMP%]{margin-left:20px}.noRecords[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10rem}.unReadCount[_ngcontent-%COMP%]{display:block;width:-webkit-fit-content;margin-left:auto}"]});const y=[{path:"",component:g}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[p.Bz.forChild(y),p.Bz]});var J=r(881);class h{}h.\u0275fac=function(n){return new(n||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[m.ez,d.u5,i.Pc]});class u{}u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[m.ez,d.u5,i.Pc,l,J.m,h]})}}]);
//# sourceMappingURL=295.8add119580882f35.js.map